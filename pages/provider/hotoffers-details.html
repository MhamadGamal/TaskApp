<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>TASKER</title>
    <!-- FONT AWESOME -->
    <link rel="stylesheet" href="../../assets/plugins/fontawesome/css/all.min.css">
    <!-- Bootstrap -->
    <link rel="stylesheet" href="../../assets/css/bootstrap.min.css">
    <!-- Slick -->
    <link rel="stylesheet" href="../../assets/plugins/slick/slick.css">
    <link rel="stylesheet" href="../../assets/plugins/slick/slick-theme.css">
    <!-- DatePicker -->
    <link rel="stylesheet" href="../../assets/css/jquery.datepicker2.css">
    <!-- Custom Style -->
    <link rel="stylesheet" href="../../assets/css/style.css">
</head>

<body>
    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a class="navbar-brand logo bold-font main-color" href="../../index.html">Task<span
                    class="normal-font s-color">app </span></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class=""> <i class="fas fa-bars    "></i> </span>
            </button>
            <div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
                <ul class="navbar-nav ">
                    <li class="nav-item active ">
                        <a class="nav-link main-btn px-3 py-2 normal" href="addNOffer.html">Add New Offer </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../provider/dashboard.html">My Dashboard</a>
                    </li>
                    <li class="nav-item notify ">
                        <a class="nav-link " href="bookings.html">My Bookings</a>

                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <img src="../../assets/img/client/user.png" alt="" srcset="">
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item" href="account.html"> <i class="far fa-address-card"></i> My
                                    Account</a>
                            <a class="dropdown-item" href="credit.html"> <i class="far fa-credit-card"></i> My
                                Credit</a>
                            <a class="dropdown-item" href="rating.html"><i class="fas fa-star"></i>My Ratings</a>
                            <div class="dropdown-divider"></div>
                            <a id="LogOut" class="dropdown-item" href="#"><i class="fas fa-sign-out-alt"></i>Logout</a>
                        </div>
                    </li>
                </ul>
                <!-- <a href="../login/login.html" class="login-btn">
                    <img src="../../assets/img/client/user.png"  alt="" srcset="">
                
                </a> -->
            </div>
        </div>
    </nav>

    <!-- /NAVBAR -->
    <!--HotOffers-details  -->
    <section id="HotOffers-details" class="grey-bg page-content">
        <div class="container">
            <div class="page-content-head">
               
            </div>

            <div class="row flex-column-reverse flex-md-row">
                <div class="col-md-12">
                    <div class="box-content">
                            <div id="hotdetails" class="container tab-pane ">
                                    
                                </div>

                    </div>
                </div>
 
            </div>
        </div>
    </section>
   
    <!--/HotOffers-details -->
    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="copyright">
                <div class="row">
                    <div class="col-md-6">
                            <a href="../home/contact.html" class="mt-2">Contact us</a>
                            <a href="../home/terms.html" class="mx-2 mt-2   ">Terms & Privecy</a>
                    </div>
                    <div class="col-md-6 text-right">
                        <a class=" logo bold-font main-color mx-2" href="index.html">Task<span
                                class="normal-font s-color">app </span></a>
                        <a href="#"> <i class="fab fa-facebook-f main-color   "></i></a>
                        <a href="#"> <i class="fab fa-twitter  main-color  "></i></a>
                        <a href="#"> <i class="fab fa-instagram  main-color  "></i></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- /Footer -->
    <!-- <input type="text" class="datepicker" data-select="datepicker"> -->
    <!-- JQUERY -->
    <script src="../../assets/js/jquery.min.js"></script>
    <!-- Bootstarp -->
    <script src="../../assets/js/bootstrap.min.js"></script>
    <script src="../../assets/js/popper.min.js"></script>
    <!-- JQUERY Validation -->
    <script src="../../assets/plugins/jquery-validation/dist/jquery.validate.min.js"></script>
    <!-- Slick -->
    <script src="../../assets/plugins/slick/slick.min.js"></script>
    <!-- Datepicker -->
    <script src="../../assets/js/jquery.datepicker2.min.js"></script>
    <!-- Custom Script -->
    <script src="../../assets/js/script.js"></script>

    <script>

        let target = Number(window.location.href.slice(window.location.href.lastIndexOf("?") + 1));
        var currentuserdata = JSON.parse(localStorage.getItem('CurrentUserData'));
         var supplierid = currentuserdata.id;
       // supplierid = '32';
        $.ajax({
            url: "http://88.80.184.99/tasker/web/api/lists/hots/offers/suppliers",
            method: 'POST',
            dataType: "json",
            data: {
                "supplier": supplierid
            },
            success: function (result) {
                if (result.error.status == true) {
                    var message = result.error.message;
                    alert(message);
                }
                else {
                    allTasks = result.data;
                    let targetTask;
                    for(let item of allTasks) {
                        if (item.id == target) {
                            targetTask = item;
                        }
                    }

                    console.log(targetTask);
                    if (targetTask) {
                        let img1 = "",img2 = "",img3 = "",imgCl = "";   

                        if(targetTask.image[0]){
                            img1 = `${'http://88.80.184.99/tasker/web/' + targetTask.image[0]}`;
                        }else{
                            img1 = "https://via.placeholder.com/150";
                        }

                        if(targetTask.image[1]) {
                            img2 = `${'http://88.80.184.99/tasker/web/' + targetTask.image[1]}`;
                        }else{
                            img2 = "https://via.placeholder.com/150";
                        }

                        if(targetTask.image[2]) {
                            img3 = `${'http://88.80.184.99/tasker/web/' + targetTask.image[2]}`;
                        }else{
                            img3 = "https://via.placeholder.com/150";
                        }
                        
                        if(targetTask.supplier.image) {
                            imgCl = `${'http://88.80.184.99/tasker/web/' + targetTask.supplier.image}`;
                        }else{
                            imgCl = "https://via.placeholder.com/100";
                        }

                        var d = `

            <div class ="row">

                                        <div class ="col-md-4">

                                            <div id="carouselExampleIndicators" class ="carousel slide" data-ride="carousel">
                                                <ol class ="carousel-indicators">
                                                    <li data-target="#carouselExampleIndicators" data-slide-to="0"
                                                        class ="active">
                                                        <img class ="d-block" src="${img1}}">
                                                    </li>
                                                    <li data-target="#carouselExampleIndicators" data-slide-to="1">
                                                        <img class ="d-block" src="${img2}">
                                                    </li>
                                                    <li data-target="#carouselExampleIndicators" data-slide-to="2">
                                                        <img class ="d-block" src="${img3}">
                                                    </li>
                                                </ol>
                                                <div class ="carousel-inner">
                                                    <div class ="carousel-item active">
                                                        <img class ="d-block w-100"
                                                            src="${img1}">
                                                    </div>
                                                    <div class ="carousel-item">
                                                        <img class ="d-block w-100"
                                                            src="${img2}">
                                                    </div>
                                                    <div class ="carousel-item">
                                                        <img class ="d-block w-100"
                                                            src="${img3}">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class ="col-md-8">
                                            <div class ="moving-tasks">
                                                <div class ="agency-tasks">
                                                    <div class ="moving-agency">
                                                        <div>
                                                            <div class ="d-flex agency">
                                                                <img src="${imgCl}" alt=""
                                                                    srcset="">
                                                                <a href="#" class ="bold">${targetTask.supplier.name}</a>
                                                            </div>
                                                            <div class ="rating main-color mb-3">
                                                                <span class ="fa fa-star checked"></span>
                                                                <span class ="fa fa-star checked"></span>
                                                                <span class ="fa fa-star checked"></span>
                                                                <span class ="fa fa-star"></span>
                                                                <span class ="fa fa-star"></span>
                                                                <span>4.5</span>
                                                            </div>
                                                        </div>
                                                        <div class ="tasks-numbers main-color mb-3">
                                                            <i class ="fas fa-business-time"></i>
                                                            <span>${getCategory(Number(targetTask.category)).name_en}</span>
                                                            </i>
                                                        </div>
                                                    </div>

                                                </div>
                                                <div>
                                                    <p class ="mb-4">
                                                   ${targetTask.description}

                                                    </p>
                                                </div>

                                                <div class ="starEndDate d-flex">
                                                    <div>
                                                        <i class ="fas fa-calendar-alt main-color mr-2"></i>
                                                        <span class ="mr-2">${targetTask.start_date}</span>


                                                    </div>
                                                    <span class ="mr-2">TO</span>
                                                    <div>
                                                        <i class ="fas fa-calendar-alt main-color mr-2"></i>
                                                        <span>${targetTask.end_date} </span>
                                                    </div>

                                                </div>
                                            </div>

                                        </div>
                                    </div>

            `;
                        $("#hotdetails").html(d);
                    }
                }

            },
            error: function (result) {
                alert('error');
            }
        });

    </script>
</body>

</html>